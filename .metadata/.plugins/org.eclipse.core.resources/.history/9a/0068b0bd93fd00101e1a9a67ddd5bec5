package com.revplay.ui;

import com.revplay.main.RevPlayApp;
import com.revplay.model.User;

import com.revplay.dao.UserDao;
import com.revplay.service.UserService;

public class UserMenu {

    // ðŸ”¹ DAO layer
    private static UserDao userDao = new UserDao();

    // ðŸ”¹ Service layer (constructor injection)
    private static UserService userService = new UserService(userDao);

    public static void register() {

        System.out.print("Username: ");
        String username = RevPlayApp.sc.nextLine();

        System.out.print("Gmail: ");
        String email = RevPlayApp.sc.nextLine();

        if (!email.endsWith("@gmail.com")) {
            System.out.println("Invalid Gmail format!");
            return;
        }

        System.out.print("Enter Password: ");
        String password = RevPlayApp.sc.nextLine();

        System.out.print("Role (USER/ARTIST): ");
        String role = RevPlayApp.sc.nextLine();

        boolean success = userService.register(username, email, password, role);

        if (success)
            System.out.println("Signup successful!");
        else
            System.out.println("Signup failed!");
    }

    public static User login() {

        System.out.print("Enter Email or Username: ");
        String input = RevPlayApp.sc.nextLine();

        System.out.print("Password: ");
        String password = RevPlayApp.sc.nextLine();

        User user = userService.login(input, password);

        if (user != null) {
            System.out.println("Login successful!");
            return user;
        } else {
            System.out.println("Wrong credentials!");
            return null;
        }
    }
}
